!function e(t,r,n){function i(s,a){if(!r[s]){if(!t[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(o)return o(s,!0);var f=new Error("Cannot find module '"+s+"'");throw f.code="MODULE_NOT_FOUND",f}var c=r[s]={exports:{}};t[s][0].call(c.exports,function(e){var r=t[s][1][e];return i(r?r:e)},c,c.exports,e,t,r,n)}return r[s].exports}for(var o="function"==typeof require&&require,s=0;s<n.length;s++)i(n[s]);return i}({1:[function(e,t,r){(function(r){function n(e){var t=this;a.call(t),t._tracks=[],t._fragmentSequence=1,t._file=e,t._decoder=null,t._findMoov(0)}function i(e,t){var r=this;r._entries=e,r._countName=t||"count",r._index=0,r._offset=0,r.value=r._entries[0]}function o(){return{version:0,flags:0,entries:[]}}var s=e("binary-search"),a=e("events").EventEmitter,u=e("inherits"),f=e("mp4-stream"),c=e("mp4-box-encoding"),d=e("range-slice-stream");t.exports=n,u(n,a),n.prototype._findMoov=function(e){var t=this;t._decoder&&t._decoder.destroy(),t._decoder=f.decode();var r=t._file.createReadStream({start:e});r.pipe(t._decoder),t._decoder.once("box",function(n){"moov"===n.type?t._decoder.decode(function(e){r.destroy();try{t._processMoov(e)}catch(n){n.message="Cannot parse mp4 file: "+n.message,t.emit("error",n)}}):(r.destroy(),t._findMoov(e+n.length))})},i.prototype.inc=function(){var e=this;e._offset++,e._offset>=e._entries[e._index][e._countName]&&(e._index++,e._offset=0),e.value=e._entries[e._index]},n.prototype._processMoov=function(e){var t=this,n=e.traks;t._tracks=[],t._hasVideo=!1,t._hasAudio=!1;for(var s=0;s<n.length;s++){var a,u,f=n[s],d=f.mdia.minf.stbl,h=d.stsd.entries[0],l=f.mdia.hdlr.handlerType;if("vide"===l&&"avc1"===h.type){if(t._hasVideo)continue;t._hasVideo=!0,a="avc1",h.avcC&&(a+="."+h.avcC.mimeCodec),u='video/mp4; codecs="'+a+'"'}else{if("soun"!==l||"mp4a"!==h.type)continue;if(t._hasAudio)continue;t._hasAudio=!0,a="mp4a",h.esds&&h.esds.mimeCodec&&(a+="."+h.esds.mimeCodec),u='audio/mp4; codecs="'+a+'"'}var p=[],g=0,m=0,v=0,_=0,y=0,w=0,b=new i(d.stts.entries),E=null;d.ctts&&(E=new i(d.ctts.entries));for(var B=0;;){var S=d.stsc.entries[y],I=d.stsz.entries[g],U=b.value.duration,L=E?E.value.compositionOffset:0,x=!0;if(d.stss&&(x=d.stss.entries[B]===g+1),p.push({size:I,duration:U,dts:w,presentationOffset:L,sync:x,offset:_+d.stco.entries[v]}),g++,g>=d.stsz.entries.length)break;if(m++,_+=I,m>=S.samplesPerChunk){m=0,_=0,v++;var k=d.stsc.entries[y+1];k&&v+1>=k.firstChunk&&y++}w+=U,b.inc(),E&&E.inc(),x&&B++}f.mdia.mdhd.duration=0,f.tkhd.duration=0;var R=S.sampleDescriptionId,A={type:"moov",mvhd:e.mvhd,traks:[{tkhd:f.tkhd,mdia:{mdhd:f.mdia.mdhd,hdlr:f.mdia.hdlr,elng:f.mdia.elng,minf:{vmhd:f.mdia.minf.vmhd,smhd:f.mdia.minf.smhd,dinf:f.mdia.minf.dinf,stbl:{stsd:d.stsd,stts:o(),ctts:o(),stsc:o(),stsz:o(),stco:o(),stss:o()}}}}],mvex:{mehd:{fragmentDuration:e.mvhd.duration},trexs:[{trackId:f.tkhd.trackId,defaultSampleDescriptionIndex:R,defaultSampleDuration:0,defaultSampleSize:0,defaultSampleFlags:0}]}};t._tracks.push({trackId:f.tkhd.trackId,timeScale:f.mdia.mdhd.timeScale,samples:p,currSample:null,currTime:null,moov:A,mime:u})}if(0===t._tracks.length)return void t.emit("error",new Error("no playable tracks"));e.mvhd.duration=0,t._ftyp={type:"ftyp",brand:"iso5",brandVersion:0,compatibleBrands:["iso5"]};var T=c.encode(t._ftyp),M=t._tracks.map(function(e){var t=c.encode(e.moov);return{mime:e.mime,init:r.concat([T,t])}});t.emit("ready",M)},n.prototype.seek=function(e){var t=this;if(!t._tracks)throw new Error("Not ready yet; wait for 'ready' event");t._fileStream&&(t._fileStream.destroy(),t._fileStream=null);var r=-1;if(t._tracks.map(function(n,i){function o(e){s.destroyed||s.box(e.moof,function(r){if(r)return t.emit("error",r);if(!s.destroyed){var a=n.inStream.slice(e.ranges);a.pipe(s.mediaData(e.length,function(e){if(e)return t.emit("error",e);if(!s.destroyed){var r=t._generateFragment(i);return r?void o(r):s.finalize()}}))}})}n.outStream&&n.outStream.destroy(),n.inStream&&(n.inStream.destroy(),n.inStream=null);var s=n.outStream=f.encode(),a=t._generateFragment(i,e);return a?((-1===r||a.ranges[0].start<r)&&(r=a.ranges[0].start),void o(a)):s.finalize()}),r>=0){var n=t._fileStream=t._file.createReadStream({start:r});t._tracks.forEach(function(e){e.inStream=new d(r),n.pipe(e.inStream)})}return t._tracks.map(function(e){return e.outStream})},n.prototype._findSampleBefore=function(e,t){var r=this,n=r._tracks[e],i=Math.floor(n.timeScale*t),o=s(n.samples,i,function(e,t){var r=e.dts+e.presentationOffset;return r-t});for(-1===o?o=0:0>o&&(o=-o-2);!n.samples[o].sync;)o--;return o};var h=1;n.prototype._generateFragment=function(e,t){var r,n=this,i=n._tracks[e];if(r=void 0!==t?n._findSampleBefore(e,t):i.currSample,r>=i.samples.length)return null;for(var o=i.samples[r].dts,s=0,a=[],u=r;u<i.samples.length;u++){var f=i.samples[u];if(f.sync&&f.dts-o>=i.timeScale*h)break;s+=f.size;var c=a.length-1;0>c||a[c].end!==f.offset?a.push({start:f.offset,end:f.offset+f.size}):a[c].end+=f.size}return i.currSample=u,{moof:n._generateMoof(e,r,u),ranges:a,length:s}},n.prototype._generateMoof=function(e,t,r){for(var n=this,i=n._tracks[e],o=[],s=t;r>s;s++){var a=i.samples[s];o.push({sampleDuration:a.duration,sampleSize:a.size,sampleFlags:a.sync?33554432:16842752,sampleCompositionTimeOffset:a.presentationOffset})}var u={type:"moof",mfhd:{sequenceNumber:n._fragmentSequence++},trafs:[{tfhd:{flags:131072,trackId:i.trackId},tfdt:{baseMediaDecodeTime:i.samples[t].dts},trun:{flags:3841,dataOffset:8,entries:o}}]};return u.trafs[0].trun.dataOffset+=c.encodingLength(u),u}}).call(this,e("buffer").Buffer)},{"binary-search":3,buffer:6,events:10,inherits:12,"mp4-box-encoding":17,"mp4-stream":20,"range-slice-stream":26}],2:[function(e,t,r){"use strict";function n(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=0,r=e.length;r>t;++t)u[t]=e[t],f[e.charCodeAt(t)]=t;f["-".charCodeAt(0)]=62,f["_".charCodeAt(0)]=63}function i(e){var t,r,n,i,o,s,a=e.length;if(a%4>0)throw new Error("Invalid string. Length must be a multiple of 4");o="="===e[a-2]?2:"="===e[a-1]?1:0,s=new c(3*a/4-o),n=o>0?a-4:a;var u=0;for(t=0,r=0;n>t;t+=4,r+=3)i=f[e.charCodeAt(t)]<<18|f[e.charCodeAt(t+1)]<<12|f[e.charCodeAt(t+2)]<<6|f[e.charCodeAt(t+3)],s[u++]=i>>16&255,s[u++]=i>>8&255,s[u++]=255&i;return 2===o?(i=f[e.charCodeAt(t)]<<2|f[e.charCodeAt(t+1)]>>4,s[u++]=255&i):1===o&&(i=f[e.charCodeAt(t)]<<10|f[e.charCodeAt(t+1)]<<4|f[e.charCodeAt(t+2)]>>2,s[u++]=i>>8&255,s[u++]=255&i),s}function o(e){return u[e>>18&63]+u[e>>12&63]+u[e>>6&63]+u[63&e]}function s(e,t,r){for(var n,i=[],s=t;r>s;s+=3)n=(e[s]<<16)+(e[s+1]<<8)+e[s+2],i.push(o(n));return i.join("")}function a(e){for(var t,r=e.length,n=r%3,i="",o=[],a=16383,f=0,c=r-n;c>f;f+=a)o.push(s(e,f,f+a>c?c:f+a));return 1===n?(t=e[r-1],i+=u[t>>2],i+=u[t<<4&63],i+="=="):2===n&&(t=(e[r-2]<<8)+e[r-1],i+=u[t>>10],i+=u[t>>4&63],i+=u[t<<2&63],i+="="),o.push(i),o.join("")}r.toByteArray=i,r.fromByteArray=a;var u=[],f=[],c="undefined"!=typeof Uint8Array?Uint8Array:Array;n()},{}],3:[function(e,t,r){t.exports=function(e,t,r,n,i){var o,s;if(void 0===n)n=0;else if(n=0|n,0>n||n>=e.length)throw new RangeError("invalid lower bound");if(void 0===i)i=e.length-1;else if(i=0|i,n>i||i>=e.length)throw new RangeError("invalid upper bound");for(;i>=n;)if(o=n+(i-n>>1),s=+r(e[o],t,o,e),0>s)n=o+1;else{if(!(s>0))return o;i=o-1}return~n}},{}],4:[function(e,t,r){},{}],5:[function(e,t,r){arguments[4][4][0].apply(r,arguments)},{dup:4}],6:[function(e,t,r){(function(t){"use strict";function n(){try{var e=new Uint8Array(1);return e.foo=function(){return 42},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(t){return!1}}function i(){return s.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function o(e,t){if(i()<t)throw new RangeError("Invalid typed array length");return s.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t),e.__proto__=s.prototype):(null===e&&(e=new s(t)),e.length=t),e}function s(e,t,r){if(!(s.TYPED_ARRAY_SUPPORT||this instanceof s))return new s(e,t,r);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return c(this,e)}return a(this,e,t,r)}function a(e,t,r,n){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?l(e,t,r,n):"string"==typeof t?d(e,t,r):p(e,t)}function u(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number')}function f(e,t,r,n){return u(t),0>=t?o(e,t):void 0!==r?"string"==typeof n?o(e,t).fill(r,n):o(e,t).fill(r):o(e,t)}function c(e,t){if(u(t),e=o(e,0>t?0:0|g(t)),!s.TYPED_ARRAY_SUPPORT)for(var r=0;t>r;r++)e[r]=0;return e}function d(e,t,r){if("string"==typeof r&&""!==r||(r="utf8"),!s.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|v(t,r);return e=o(e,n),e.write(t,r),e}function h(e,t){var r=0|g(t.length);e=o(e,r);for(var n=0;r>n;n+=1)e[n]=255&t[n];return e}function l(e,t,r,n){if(t.byteLength,0>r||t.byteLength<r)throw new RangeError("'offset' is out of bounds");if(t.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");return t=void 0===n?new Uint8Array(t,r):new Uint8Array(t,r,n),s.TYPED_ARRAY_SUPPORT?(e=t,e.__proto__=s.prototype):e=h(e,t),e}function p(e,t){if(s.isBuffer(t)){var r=0|g(t.length);return e=o(e,r),0===e.length?e:(t.copy(e,0,0,r),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||J(t.length)?o(e,0):h(e,t);if("Buffer"===t.type&&Q(t.data))return h(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function g(e){if(e>=i())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i().toString(16)+" bytes");return 0|e}function m(e){return+e!=e&&(e=0),s.alloc(+e)}function v(e,t){if(s.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var r=e.length;if(0===r)return 0;for(var n=!1;;)switch(t){case"ascii":case"binary":case"raw":case"raws":return r;case"utf8":case"utf-8":case void 0:return F(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return G(e).length;default:if(n)return F(e).length;t=(""+t).toLowerCase(),n=!0}}function _(e,t,r){var n=!1;if((void 0===t||0>t)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),0>=r)return"";if(r>>>=0,t>>>=0,t>=r)return"";for(e||(e="utf8");;)switch(e){case"hex":return T(this,t,r);case"utf8":case"utf-8":return x(this,t,r);case"ascii":return R(this,t,r);case"binary":return A(this,t,r);case"base64":return L(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return M(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function y(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function w(e,t,r,n){function i(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}var o=1,s=e.length,a=t.length;if(void 0!==n&&(n=String(n).toLowerCase(),"ucs2"===n||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;o=2,s/=2,a/=2,r/=2}for(var u=-1,f=0;s>r+f;f++)if(i(e,r+f)===i(t,-1===u?0:f-u)){if(-1===u&&(u=f),f-u+1===a)return(r+u)*o}else-1!==u&&(f-=f-u),u=-1;return-1}function b(e,t,r,n){r=Number(r)||0;var i=e.length-r;n?(n=Number(n),n>i&&(n=i)):n=i;var o=t.length;if(o%2!==0)throw new Error("Invalid hex string");n>o/2&&(n=o/2);for(var s=0;n>s;s++){var a=parseInt(t.substr(2*s,2),16);if(isNaN(a))return s;e[r+s]=a}return s}function E(e,t,r,n){return X(F(t,e.length-r),e,r,n)}function B(e,t,r,n){return X(H(t),e,r,n)}function S(e,t,r,n){return B(e,t,r,n)}function I(e,t,r,n){return X(G(t),e,r,n)}function U(e,t,r,n){return X(V(t,e.length-r),e,r,n)}function L(e,t,r){return 0===t&&r===e.length?Z.fromByteArray(e):Z.fromByteArray(e.slice(t,r))}function x(e,t,r){r=Math.min(e.length,r);for(var n=[],i=t;r>i;){var o=e[i],s=null,a=o>239?4:o>223?3:o>191?2:1;if(r>=i+a){var u,f,c,d;switch(a){case 1:128>o&&(s=o);break;case 2:u=e[i+1],128===(192&u)&&(d=(31&o)<<6|63&u,d>127&&(s=d));break;case 3:u=e[i+1],f=e[i+2],128===(192&u)&&128===(192&f)&&(d=(15&o)<<12|(63&u)<<6|63&f,d>2047&&(55296>d||d>57343)&&(s=d));break;case 4:u=e[i+1],f=e[i+2],c=e[i+3],128===(192&u)&&128===(192&f)&&128===(192&c)&&(d=(15&o)<<18|(63&u)<<12|(63&f)<<6|63&c,d>65535&&1114112>d&&(s=d))}}null===s?(s=65533,a=1):s>65535&&(s-=65536,n.push(s>>>10&1023|55296),s=56320|1023&s),n.push(s),i+=a}return k(n)}function k(e){var t=e.length;if($>=t)return String.fromCharCode.apply(String,e);for(var r="",n=0;t>n;)r+=String.fromCharCode.apply(String,e.slice(n,n+=$));return r}function R(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;r>i;i++)n+=String.fromCharCode(127&e[i]);return n}function A(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;r>i;i++)n+=String.fromCharCode(e[i]);return n}function T(e,t,r){var n=e.length;(!t||0>t)&&(t=0),(!r||0>r||r>n)&&(r=n);for(var i="",o=t;r>o;o++)i+=N(e[o]);return i}function M(e,t,r){for(var n=e.slice(t,r),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function D(e,t,r){if(e%1!==0||0>e)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function C(e,t,r,n,i,o){if(!s.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||o>t)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function P(e,t,r,n){0>t&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-r,2);o>i;i++)e[r+i]=(t&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function O(e,t,r,n){0>t&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-r,4);o>i;i++)e[r+i]=t>>>8*(n?i:3-i)&255}function j(e,t,r,n,i,o){if(r+n>e.length)throw new RangeError("Index out of range");if(0>r)throw new RangeError("Index out of range")}function q(e,t,r,n,i){return i||j(e,t,r,4,3.4028234663852886e38,-3.4028234663852886e38),K.write(e,t,r,n,23,4),r+4}function W(e,t,r,n,i){return i||j(e,t,r,8,1.7976931348623157e308,-1.7976931348623157e308),K.write(e,t,r,n,52,8),r+8}function Y(e){if(e=z(e).replace(ee,""),e.length<2)return"";for(;e.length%4!==0;)e+="=";return e}function z(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function N(e){return 16>e?"0"+e.toString(16):e.toString(16)}function F(e,t){t=t||1/0;for(var r,n=e.length,i=null,o=[],s=0;n>s;s++){if(r=e.charCodeAt(s),r>55295&&57344>r){if(!i){if(r>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(s+1===n){(t-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(56320>r){(t-=3)>-1&&o.push(239,191,189),i=r;continue}r=(i-55296<<10|r-56320)+65536}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,128>r){if((t-=1)<0)break;o.push(r)}else if(2048>r){if((t-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(65536>r){if((t-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(1114112>r))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function H(e){for(var t=[],r=0;r<e.length;r++)t.push(255&e.charCodeAt(r));return t}function V(e,t){for(var r,n,i,o=[],s=0;s<e.length&&!((t-=2)<0);s++)r=e.charCodeAt(s),n=r>>8,i=r%256,o.push(i),o.push(n);return o}function G(e){return Z.toByteArray(Y(e))}function X(e,t,r,n){for(var i=0;n>i&&!(i+r>=t.length||i>=e.length);i++)t[i+r]=e[i];return i}function J(e){return e!==e}var Z=e("base64-js"),K=e("ieee754"),Q=e("isarray");r.Buffer=s,r.SlowBuffer=m,r.INSPECT_MAX_BYTES=50,s.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:n(),r.kMaxLength=i(),s.poolSize=8192,s._augment=function(e){return e.__proto__=s.prototype,e},s.from=function(e,t,r){return a(null,e,t,r)},s.TYPED_ARRAY_SUPPORT&&(s.prototype.__proto__=Uint8Array.prototype,s.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&s[Symbol.species]===s&&Object.defineProperty(s,Symbol.species,{value:null,configurable:!0})),s.alloc=function(e,t,r){return f(null,e,t,r)},s.allocUnsafe=function(e){return c(null,e)},s.allocUnsafeSlow=function(e){return c(null,e)},s.isBuffer=function(e){return!(null==e||!e._isBuffer)},s.compare=function(e,t){if(!s.isBuffer(e)||!s.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var r=e.length,n=t.length,i=0,o=Math.min(r,n);o>i;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return n>r?-1:r>n?1:0},s.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(e,t){if(!Q(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return s.alloc(0);var r;if(void 0===t)for(t=0,r=0;r<e.length;r++)t+=e[r].length;var n=s.allocUnsafe(t),i=0;for(r=0;r<e.length;r++){var o=e[r];if(!s.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(n,i),i+=o.length}return n},s.byteLength=v,s.prototype._isBuffer=!0,s.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;e>t;t+=2)y(this,t,t+1);return this},s.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;e>t;t+=4)y(this,t,t+3),y(this,t+1,t+2);return this},s.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?x(this,0,e):_.apply(this,arguments)},s.prototype.equals=function(e){if(!s.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:0===s.compare(this,e)},s.prototype.inspect=function(){var e="",t=r.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,t).match(/.{2}/g).join(" "),this.length>t&&(e+=" ... ")),"<Buffer "+e+">"},s.prototype.compare=function(e,t,r,n,i){if(!s.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),0>t||r>e.length||0>n||i>this.length)throw new RangeError("out of range index");if(n>=i&&t>=r)return 0;if(n>=i)return-1;if(t>=r)return 1;if(t>>>=0,r>>>=0,n>>>=0,i>>>=0,this===e)return 0;for(var o=i-n,a=r-t,u=Math.min(o,a),f=this.slice(n,i),c=e.slice(t,r),d=0;u>d;++d)if(f[d]!==c[d]){o=f[d],a=c[d];break}return a>o?-1:o>a?1:0},s.prototype.indexOf=function(e,t,r){if("string"==typeof t?(r=t,t=0):t>2147483647?t=2147483647:-2147483648>t&&(t=-2147483648),t>>=0,0===this.length)return-1;if(t>=this.length)return-1;if(0>t&&(t=Math.max(this.length+t,0)),"string"==typeof e&&(e=s.from(e,r)),s.isBuffer(e))return 0===e.length?-1:w(this,e,t,r);if("number"==typeof e)return s.TYPED_ARRAY_SUPPORT&&"function"===Uint8Array.prototype.indexOf?Uint8Array.prototype.indexOf.call(this,e,t):w(this,[e],t,r);throw new TypeError("val must be string, number or Buffer")},s.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},s.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t=0|t,isFinite(r)?(r=0|r,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-t;if((void 0===r||r>i)&&(r=i),e.length>0&&(0>r||0>t)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return b(this,e,t,r);case"utf8":case"utf-8":return E(this,e,t,r);case"ascii":return B(this,e,t,r);case"binary":return S(this,e,t,r);case"base64":return I(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return U(this,e,t,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var $=4096;s.prototype.slice=function(e,t){var r=this.length;e=~~e,t=void 0===t?r:~~t,0>e?(e+=r,0>e&&(e=0)):e>r&&(e=r),0>t?(t+=r,0>t&&(t=0)):t>r&&(t=r),e>t&&(t=e);var n;if(s.TYPED_ARRAY_SUPPORT)n=this.subarray(e,t),n.__proto__=s.prototype;else{var i=t-e;n=new s(i,void 0);for(var o=0;i>o;o++)n[o]=this[o+e]}return n},s.prototype.readUIntLE=function(e,t,r){e=0|e,t=0|t,r||D(e,t,this.length);for(var n=this[e],i=1,o=0;++o<t&&(i*=256);)n+=this[e+o]*i;return n},s.prototype.readUIntBE=function(e,t,r){e=0|e,t=0|t,r||D(e,t,this.length);for(var n=this[e+--t],i=1;t>0&&(i*=256);)n+=this[e+--t]*i;return n},s.prototype.readUInt8=function(e,t){return t||D(e,1,this.length),this[e]},s.prototype.readUInt16LE=function(e,t){return t||D(e,2,this.length),this[e]|this[e+1]<<8},s.prototype.readUInt16BE=function(e,t){return t||D(e,2,this.length),this[e]<<8|this[e+1]},s.prototype.readUInt32LE=function(e,t){return t||D(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},s.prototype.readUInt32BE=function(e,t){return t||D(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},s.prototype.readIntLE=function(e,t,r){e=0|e,t=0|t,r||D(e,t,this.length);for(var n=this[e],i=1,o=0;++o<t&&(i*=256);)n+=this[e+o]*i;return i*=128,n>=i&&(n-=Math.pow(2,8*t)),n},s.prototype.readIntBE=function(e,t,r){e=0|e,t=0|t,r||D(e,t,this.length);for(var n=t,i=1,o=this[e+--n];n>0&&(i*=256);)o+=this[e+--n]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*t)),o},s.prototype.readInt8=function(e,t){return t||D(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},s.prototype.readInt16LE=function(e,t){t||D(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},s.prototype.readInt16BE=function(e,t){t||D(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},s.prototype.readInt32LE=function(e,t){return t||D(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},s.prototype.readInt32BE=function(e,t){return t||D(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},s.prototype.readFloatLE=function(e,t){return t||D(e,4,this.length),K.read(this,e,!0,23,4)},s.prototype.readFloatBE=function(e,t){return t||D(e,4,this.length),K.read(this,e,!1,23,4)},s.prototype.readDoubleLE=function(e,t){return t||D(e,8,this.length),K.read(this,e,!0,52,8)},s.prototype.readDoubleBE=function(e,t){return t||D(e,8,this.length),K.read(this,e,!1,52,8)},s.prototype.writeUIntLE=function(e,t,r,n){if(e=+e,t=0|t,r=0|r,!n){var i=Math.pow(2,8*r)-1;C(this,e,t,r,i,0)}var o=1,s=0;for(this[t]=255&e;++s<r&&(o*=256);)this[t+s]=e/o&255;return t+r},s.prototype.writeUIntBE=function(e,t,r,n){if(e=+e,t=0|t,r=0|r,!n){var i=Math.pow(2,8*r)-1;C(this,e,t,r,i,0)}var o=r-1,s=1;for(this[t+o]=255&e;--o>=0&&(s*=256);)this[t+o]=e/s&255;return t+r},s.prototype.writeUInt8=function(e,t,r){return e=+e,t=0|t,r||C(this,e,t,1,255,0),s.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},s.prototype.writeUInt16LE=function(e,t,r){return e=+e,t=0|t,r||C(this,e,t,2,65535,0),s.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):P(this,e,t,!0),t+2},s.prototype.writeUInt16BE=function(e,t,r){return e=+e,t=0|t,r||C(this,e,t,2,65535,0),s.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):P(this,e,t,!1),t+2},s.prototype.writeUInt32LE=function(e,t,r){return e=+e,t=0|t,r||C(this,e,t,4,4294967295,0),s.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):O(this,e,t,!0),t+4},s.prototype.writeUInt32BE=function(e,t,r){return e=+e,t=0|t,r||C(this,e,t,4,4294967295,0),s.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):O(this,e,t,!1),t+4},s.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t=0|t,!n){var i=Math.pow(2,8*r-1);C(this,e,t,r,i-1,-i)}var o=0,s=1,a=0;for(this[t]=255&e;++o<r&&(s*=256);)0>e&&0===a&&0!==this[t+o-1]&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+r},s.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t=0|t,!n){var i=Math.pow(2,8*r-1);C(this,e,t,r,i-1,-i)}var o=r-1,s=1,a=0;for(this[t+o]=255&e;--o>=0&&(s*=256);)0>e&&0===a&&0!==this[t+o+1]&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+r},s.prototype.writeInt8=function(e,t,r){return e=+e,t=0|t,r||C(this,e,t,1,127,-128),s.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),0>e&&(e=255+e+1),this[t]=255&e,t+1},s.prototype.writeInt16LE=function(e,t,r){return e=+e,t=0|t,r||C(this,e,t,2,32767,-32768),s.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):P(this,e,t,!0),t+2},s.prototype.writeInt16BE=function(e,t,r){return e=+e,t=0|t,r||C(this,e,t,2,32767,-32768),s.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):P(this,e,t,!1),t+2},s.prototype.writeInt32LE=function(e,t,r){return e=+e,t=0|t,r||C(this,e,t,4,2147483647,-2147483648),s.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):O(this,e,t,!0),t+4},s.prototype.writeInt32BE=function(e,t,r){return e=+e,t=0|t,r||C(this,e,t,4,2147483647,-2147483648),0>e&&(e=4294967295+e+1),s.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):O(this,e,t,!1),t+4},s.prototype.writeFloatLE=function(e,t,r){return q(this,e,t,!0,r)},s.prototype.writeFloatBE=function(e,t,r){return q(this,e,t,!1,r)},s.prototype.writeDoubleLE=function(e,t,r){return W(this,e,t,!0,r)},s.prototype.writeDoubleBE=function(e,t,r){return W(this,e,t,!1,r)},s.prototype.copy=function(e,t,r,n){if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&r>n&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(0>t)throw new RangeError("targetStart out of bounds");if(0>r||r>=this.length)throw new RangeError("sourceStart out of bounds");if(0>n)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var i,o=n-r;if(this===e&&t>r&&n>t)for(i=o-1;i>=0;i--)e[i+t]=this[i+r];else if(1e3>o||!s.TYPED_ARRAY_SUPPORT)for(i=0;o>i;i++)e[i+t]=this[i+r];else Uint8Array.prototype.set.call(e,this.subarray(r,r+o),t);return o},s.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===e.length){var i=e.charCodeAt(0);256>i&&(e=i)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!s.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof e&&(e=255&e);if(0>t||this.length<t||this.length<r)throw new RangeError("Out of range index");if(t>=r)return this;t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0);var o;if("number"==typeof e)for(o=t;r>o;o++)this[o]=e;else{var a=s.isBuffer(e)?e:F(new s(e,n).toString()),u=a.length;for(o=0;r-t>o;o++)this[o+t]=a[o%u]}return this};var ee=/[^+\/0-9A-Za-z-_]/g}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"base64-js":2,ieee754:11,isarray:7}],7:[function(e,t,r){var n={}.toString;t.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},{}],8:[function(e,t,r){(function(e){function t(e){return Array.isArray?Array.isArray(e):"[object Array]"===m(e)}function n(e){return"boolean"==typeof e}function i(e){return null===e}function o(e){return null==e}function s(e){return"number"==typeof e}function a(e){return"string"==typeof e}function u(e){return"symbol"==typeof e}function f(e){return void 0===e}function c(e){return"[object RegExp]"===m(e)}function d(e){return"object"==typeof e&&null!==e}function h(e){return"[object Date]"===m(e)}function l(e){return"[object Error]"===m(e)||e instanceof Error}function p(e){return"function"==typeof e}function g(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||"undefined"==typeof e}function m(e){return Object.prototype.toString.call(e)}r.isArray=t,r.isBoolean=n,r.isNull=i,r.isNullOrUndefined=o,r.isNumber=s,r.isString=a,r.isSymbol=u,r.isUndefined=f,r.isRegExp=c,r.isObject=d,r.isDate=h,r.isError=l,r.isFunction=p,r.isPrimitive=g,r.isBuffer=e.isBuffer}).call(this,{isBuffer:e("../../is-buffer/index.js")})},{"../../is-buffer/index.js":13}],9:[function(e,t,r){var n=e("once"),i=function(){},o=function(e){return e.setHeader&&"function"==typeof e.abort},s=function(e){return e.stdio&&Array.isArray(e.stdio)&&3===e.stdio.length},a=function(e,t,r){if("function"==typeof t)return a(e,null,t);t||(t={}),r=n(r||i);var u=e._writableState,f=e._readableState,c=t.readable||t.readable!==!1&&e.readable,d=t.writable||t.writable!==!1&&e.writable,h=function(){e.writable||l()},l=function(){d=!1,c||r()},p=function(){c=!1,d||r()},g=function(e){r(e?new Error("exited with error code: "+e):null)},m=function(){return(!c||f&&f.ended)&&(!d||u&&u.ended)?void 0:r(new Error("premature close"))},v=function(){e.req.on("finish",l)};return o(e)?(e.on("complete",l),e.on("abort",m),e.req?v():e.on("request",v)):d&&!u&&(e.on("end",h),e.on("close",h)),s(e)&&e.on("exit",g),e.on("end",p),e.on("finish",l),t.error!==!1&&e.on("error",r),e.on("close",m),function(){e.removeListener("complete",l),e.removeListener("abort",m),e.removeListener("request",v),e.req&&e.req.removeListener("finish",l),e.removeListener("end",h),e.removeListener("close",h),e.removeListener("finish",l),e.removeListener("exit",g),e.removeListener("end",p),e.removeListener("error",r),e.removeListener("close",m)}};t.exports=a},{once:22}],10:[function(e,t,r){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(e){return"function"==typeof e}function o(e){return"number"==typeof e}function s(e){return"object"==typeof e&&null!==e}function a(e){return void 0===e}t.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if(!o(e)||0>e||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,r,n,o,u,f;if(this._events||(this._events={}),"error"===e&&(!this._events.error||s(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;throw TypeError('Uncaught, unspecified "error" event.')}if(r=this._events[e],a(r))return!1;if(i(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:o=Array.prototype.slice.call(arguments,1),r.apply(this,o)}else if(s(r))for(o=Array.prototype.slice.call(arguments,1),f=r.slice(),n=f.length,u=0;n>u;u++)f[u].apply(this,o);return!0},n.prototype.addListener=function(e,t){var r;if(!i(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,i(t.listener)?t.listener:t),this._events[e]?s(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,s(this._events[e])&&!this._events[e].warned&&(r=a(this._maxListeners)?n.defaultMaxListeners:this._maxListeners,r&&r>0&&this._events[e].length>r&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){function r(){this.removeListener(e,r),n||(n=!0,t.apply(this,arguments))}if(!i(t))throw TypeError("listener must be a function");var n=!1;return r.listener=t,this.on(e,r),this},n.prototype.removeListener=function(e,t){var r,n,o,a;if(!i(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(r=this._events[e],o=r.length,n=-1,r===t||i(r.listener)&&r.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(s(r)){for(a=o;a-- >0;)if(r[a]===t||r[a].listener&&r[a].listener===t){n=a;break}if(0>n)return this;1===r.length?(r.length=0,delete this._events[e]):r.splice(n,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],
this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(r=this._events[e],i(r))this.removeListener(e,r);else if(r)for(;r.length;)this.removeListener(e,r[r.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?i(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(i(t))return 1;if(t)return t.length}return 0},n.listenerCount=function(e,t){return e.listenerCount(t)}},{}],11:[function(e,t,r){r.read=function(e,t,r,n,i){var o,s,a=8*i-n-1,u=(1<<a)-1,f=u>>1,c=-7,d=r?i-1:0,h=r?-1:1,l=e[t+d];for(d+=h,o=l&(1<<-c)-1,l>>=-c,c+=a;c>0;o=256*o+e[t+d],d+=h,c-=8);for(s=o&(1<<-c)-1,o>>=-c,c+=n;c>0;s=256*s+e[t+d],d+=h,c-=8);if(0===o)o=1-f;else{if(o===u)return s?NaN:(l?-1:1)*(1/0);s+=Math.pow(2,n),o-=f}return(l?-1:1)*s*Math.pow(2,o-n)},r.write=function(e,t,r,n,i,o){var s,a,u,f=8*o-i-1,c=(1<<f)-1,d=c>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,l=n?0:o-1,p=n?1:-1,g=0>t||0===t&&0>1/t?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=c):(s=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-s))<1&&(s--,u*=2),t+=s+d>=1?h/u:h*Math.pow(2,1-d),t*u>=2&&(s++,u/=2),s+d>=c?(a=0,s=c):s+d>=1?(a=(t*u-1)*Math.pow(2,i),s+=d):(a=t*Math.pow(2,d-1)*Math.pow(2,i),s=0));i>=8;e[r+l]=255&a,l+=p,a/=256,i-=8);for(s=s<<i|a,f+=i;f>0;e[r+l]=255&s,l+=p,s/=256,f-=8);e[r+l-p]|=128*g}},{}],12:[function(e,t,r){"function"==typeof Object.create?t.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}},{}],13:[function(e,t,r){t.exports=function(e){return!(null==e||!(e._isBuffer||e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)))}},{}],14:[function(e,t,r){function n(e,t){var r=this;if(!(r instanceof n))return new n(e,t);if(!u)throw new Error("web browser lacks MediaSource support");t||(t={}),r._bufferDuration=t.bufferDuration||f,r._elem=e,r._mediaSource=new u,r._streams=[],r.detailedError=null,r._errorHandler=function(){r._elem.removeEventListener("error",r._errorHandler);var e=r._streams.slice();e.forEach(function(e){e.destroy(r._elem.error)})},r._elem.addEventListener("error",r._errorHandler),r._elem.src=window.URL.createObjectURL(r._mediaSource)}function i(e,t){var r=this;if(s.Writable.call(r),r._wrapper=e,r._elem=e._elem,r._mediaSource=e._mediaSource,r._allStreams=e._streams,r._allStreams.push(r),r._bufferDuration=e._bufferDuration,r._sourceBuffer=null,r._openHandler=function(){r._onSourceOpen()},r._flowHandler=function(){r._flow()},"string"==typeof t)r._type=t,"open"===r._mediaSource.readyState?r._createSourceBuffer():r._mediaSource.addEventListener("sourceopen",r._openHandler);else if(null===t._sourceBuffer)t.destroy(),r._type=t._type,r._mediaSource.addEventListener("sourceopen",r._openHandler);else{if(!t._sourceBuffer)throw new Error("The argument to MediaElementWrapper.createWriteStream must be a string or a previous stream returned from that function");t.destroy(),r._type=t._type,r._sourceBuffer=t._sourceBuffer,r._sourceBuffer.addEventListener("updateend",r._flowHandler)}r._elem.addEventListener("timeupdate",r._flowHandler),r.on("error",function(e){r._wrapper.error(e)}),r.on("finish",function(){if(!r.destroyed&&(r._finished=!0,r._allStreams.every(function(e){return e._finished})))try{r._mediaSource.endOfStream()}catch(e){}})}t.exports=n;var o=e("inherits"),s=e("readable-stream"),a=e("to-arraybuffer"),u="undefined"!=typeof window&&window.MediaSource,f=60;n.prototype.createWriteStream=function(e){var t=this;return new i(t,e)},n.prototype.error=function(e){var t=this;t.detailedError||(t.detailedError=e);try{t._mediaSource.endOfStream("decode")}catch(e){}},o(i,s.Writable),i.prototype._onSourceOpen=function(){var e=this;e.destroyed||(e._mediaSource.removeEventListener("sourceopen",e._openHandler),e._createSourceBuffer())},i.prototype.destroy=function(e){var t=this;t.destroyed||(t.destroyed=!0,t._allStreams.splice(t._allStreams.indexOf(t),1),t._mediaSource.removeEventListener("sourceopen",t._openHandler),t._elem.removeEventListener("timeupdate",t._flowHandler),t._sourceBuffer&&(t._sourceBuffer.removeEventListener("updateend",t._flowHandler),"open"===t._mediaSource.readyState&&t._sourceBuffer.abort()),e&&t.emit("error",e),t.emit("close"))},i.prototype._createSourceBuffer=function(){var e=this;if(!e.destroyed)if(u.isTypeSupported(e._type)){if(e._sourceBuffer=e._mediaSource.addSourceBuffer(e._type),e._sourceBuffer.addEventListener("updateend",e._flowHandler),e._cb){var t=e._cb;e._cb=null,t()}}else e.destroy(new Error("The provided type is not supported"))},i.prototype._write=function(e,t,r){var n=this;if(!n.destroyed){if(!n._sourceBuffer)return void(n._cb=function(i){return i?r(i):void n._write(e,t,r)});if(n._sourceBuffer.updating)return r(new Error("Cannot append buffer while source buffer updating"));try{n._sourceBuffer.appendBuffer(a(e))}catch(i){return void n.destroy(i)}n._cb=r}},i.prototype._flow=function(){var e=this;if(!e.destroyed&&e._sourceBuffer&&!e._sourceBuffer.updating&&!("open"===e._mediaSource.readyState&&e._getBufferDuration()>e._bufferDuration)&&e._cb){var t=e._cb;e._cb=null,t()}};var c=0;i.prototype._getBufferDuration=function(){for(var e=this,t=e._sourceBuffer.buffered,r=e._elem.currentTime,n=-1,i=0;i<t.length;i++){var o=t.start(i),s=t.end(i)+c;if(o>r)break;(n>=0||s>=r)&&(n=s)}var a=n-r;return 0>a&&(a=0),a}},{inherits:12,"readable-stream":33,"to-arraybuffer":35}],15:[function(e,t,r){(function(t){function n(e,t,r){for(var n=t;r>n;n++)e[n]=0}function i(e,t,r){t.writeUInt32BE(Math.floor((e.getTime()+m)/1e3),r)}function o(e,t,r){t.writeUInt16BE(Math.floor(e)%65536,r),t.writeUInt16BE(Math.floor(256*e*256)%65536,r+2)}function s(e,t,r){t[r]=Math.floor(e)%256,t[r+1]=Math.floor(256*e)%256}function a(e,t,r){e||(e=[0,0,0,0,0,0,0,0,0]);for(var n=0;n<e.length;n++)o(e[n],t,r+4*n)}function u(e,r,n){var i=new t(e,"utf8");i.copy(r,n),r[n+i.length]=0}function f(e){for(var t=new Array(e.length/4),r=0;r<t.length;r++)t[r]=d(e,4*r);return t}function c(e,t){return new Date(1e3*e.readUInt32BE(t)-m)}function d(e,t){return e.readUInt16BE(t)+e.readUInt16BE(t+2)/65536}function h(e,t){return e[t]+e[t+1]/256}function l(e,t,r){var n;for(n=0;r>n&&0!==e[t+n];n++);return e.toString("utf8",t,t+n)}var p=e("./index"),g=e("./descriptor"),m=20828448e5;r.fullBoxes={};var v=["mvhd","tkhd","mdhd","vmhd","smhd","stsd","esds","stsz","stco","stss","stts","ctts","stsc","dref","elst","hdlr","mehd","trex","mfhd","tfhd","tfdt","trun"];v.forEach(function(e){r.fullBoxes[e]=!0}),r.ftyp={},r.ftyp.encode=function(e,n,i){n=n?n.slice(i):new t(r.ftyp.encodingLength(e));var o=e.compatibleBrands||[];n.write(e.brand,0,4,"ascii"),n.writeUInt32BE(e.brandVersion,4);for(var s=0;s<o.length;s++)n.write(o[s],8+4*s,4,"ascii");return r.ftyp.encode.bytes=8+4*o.length,n},r.ftyp.decode=function(e,t){e=e.slice(t);for(var r=e.toString("ascii",0,4),n=e.readUInt32BE(4),i=[],o=8;o<e.length;o+=4)i.push(e.toString("ascii",o,o+4));return{brand:r,brandVersion:n,compatibleBrands:i}},r.ftyp.encodingLength=function(e){return 8+4*(e.compatibleBrands||[]).length},r.mvhd={},r.mvhd.encode=function(e,u,f){return u=u?u.slice(f):new t(96),i(e.ctime||new Date,u,0),i(e.mtime||new Date,u,4),u.writeUInt32BE(e.timeScale||0,8),u.writeUInt32BE(e.duration||0,12),o(e.preferredRate||0,u,16),s(e.preferredVolume||0,u,20),n(u,22,32),a(e.matrix,u,32),u.writeUInt32BE(e.previewTime||0,68),u.writeUInt32BE(e.previewDuration||0,72),u.writeUInt32BE(e.posterTime||0,76),u.writeUInt32BE(e.selectionTime||0,80),u.writeUInt32BE(e.selectionDuration||0,84),u.writeUInt32BE(e.currentTime||0,88),u.writeUInt32BE(e.nextTrackId||0,92),r.mvhd.encode.bytes=96,u},r.mvhd.decode=function(e,t){return e=e.slice(t),{ctime:c(e,0),mtime:c(e,4),timeScale:e.readUInt32BE(8),duration:e.readUInt32BE(12),preferredRate:d(e,16),preferredVolume:h(e,20),matrix:f(e.slice(32,68)),previewTime:e.readUInt32BE(68),previewDuration:e.readUInt32BE(72),posterTime:e.readUInt32BE(76),selectionTime:e.readUInt32BE(80),selectionDuration:e.readUInt32BE(84),currentTime:e.readUInt32BE(88),nextTrackId:e.readUInt32BE(92)}},r.mvhd.encodingLength=function(e){return 96},r.tkhd={},r.tkhd.encode=function(e,o,s){return o=o?o.slice(s):new t(80),i(e.ctime||new Date,o,0),i(e.mtime||new Date,o,4),o.writeUInt32BE(e.trackId||0,8),n(o,12,16),o.writeUInt32BE(e.duration||0,16),n(o,20,28),o.writeUInt16BE(e.layer||0,28),o.writeUInt16BE(e.alternateGroup||0,30),o.writeUInt16BE(e.volume||0,32),a(e.matrix,o,36),o.writeUInt32BE(e.trackWidth||0,72),o.writeUInt32BE(e.trackHeight||0,76),r.tkhd.encode.bytes=80,o},r.tkhd.decode=function(e,t){return e=e.slice(t),{ctime:c(e,0),mtime:c(e,4),trackId:e.readUInt32BE(8),duration:e.readUInt32BE(16),layer:e.readUInt16BE(28),alternateGroup:e.readUInt16BE(30),volume:e.readUInt16BE(32),matrix:f(e.slice(36,72)),trackWidth:e.readUInt32BE(72),trackHeight:e.readUInt32BE(76)}},r.tkhd.encodingLength=function(e){return 80},r.mdhd={},r.mdhd.encode=function(e,n,o){return n=n?n.slice(o):new t(20),i(e.ctime||new Date,n,0),i(e.mtime||new Date,n,4),n.writeUInt32BE(e.timeScale||0,8),n.writeUInt32BE(e.duration||0,12),n.writeUInt16BE(e.language||0,16),n.writeUInt16BE(e.quality||0,18),r.mdhd.encode.bytes=20,n},r.mdhd.decode=function(e,t){return e=e.slice(t),{ctime:c(e,0),mtime:c(e,4),timeScale:e.readUInt32BE(8),duration:e.readUInt32BE(12),language:e.readUInt16BE(16),quality:e.readUInt16BE(18)}},r.mdhd.encodingLength=function(e){return 20},r.vmhd={},r.vmhd.encode=function(e,n,i){n=n?n.slice(i):new t(8),n.writeUInt16BE(e.graphicsMode||0,0);var o=e.opcolor||[0,0,0];return n.writeUInt16BE(o[0],2),n.writeUInt16BE(o[1],4),n.writeUInt16BE(o[2],6),r.vmhd.encode.bytes=8,n},r.vmhd.decode=function(e,t){return e=e.slice(t),{graphicsMode:e.readUInt16BE(0),opcolor:[e.readUInt16BE(2),e.readUInt16BE(4),e.readUInt16BE(6)]}},r.vmhd.encodingLength=function(e){return 8},r.smhd={},r.smhd.encode=function(e,i,o){return i=i?i.slice(o):new t(4),i.writeUInt16BE(e.balance||0,0),n(i,2,4),r.smhd.encode.bytes=4,i},r.smhd.decode=function(e,t){return e=e.slice(t),{balance:e.readUInt16BE(0)}},r.smhd.encodingLength=function(e){return 4},r.stsd={},r.stsd.encode=function(e,n,i){n=n?n.slice(i):new t(r.stsd.encodingLength(e));var o=e.entries||[];n.writeUInt32BE(o.length,0);for(var s=4,a=0;a<o.length;a++){var u=o[a];p.encode(u,n,s),s+=p.encode.bytes}return r.stsd.encode.bytes=s,n},r.stsd.decode=function(e,t,r){e=e.slice(t);for(var n=e.readUInt32BE(0),i=new Array(n),o=4,s=0;n>s;s++){var a=p.decode(e,o,r);i[s]=a,o+=a.length}return{entries:i}},r.stsd.encodingLength=function(e){var t=4;if(!e.entries)return t;for(var r=0;r<e.entries.length;r++)t+=p.encodingLength(e.entries[r]);return t},r.avc1=r.VisualSampleEntry={},r.VisualSampleEntry.encode=function(e,i,o){i=i?i.slice(o):new t(r.VisualSampleEntry.encodingLength(e)),n(i,0,6),i.writeUInt16BE(e.dataReferenceIndex||0,6),n(i,8,24),i.writeUInt16BE(e.width||0,24),i.writeUInt16BE(e.height||0,26),i.writeUInt32BE(e.hResolution||4718592,28),i.writeUInt32BE(e.vResolution||4718592,32),n(i,36,40),i.writeUInt16BE(e.frameCount||1,40);var s=e.compressorName||"",a=Math.min(s.length,31);i.writeUInt8(a,42),i.write(s,43,a,"utf8"),i.writeUInt16BE(e.depth||24,74),i.writeInt16BE(-1,76);var u=78,f=e.children||[];f.forEach(function(e){p.encode(e,i,u),u+=p.encode.bytes}),r.VisualSampleEntry.encode.bytes=u},r.VisualSampleEntry.decode=function(e,t,r){e=e.slice(t);for(var n=r-t,i=Math.min(e.readUInt8(42),31),o={dataReferenceIndex:e.readUInt16BE(6),width:e.readUInt16BE(24),height:e.readUInt16BE(26),hResolution:e.readUInt32BE(28),vResolution:e.readUInt32BE(32),frameCount:e.readUInt16BE(40),compressorName:e.toString("utf8",43,43+i),depth:e.readUInt16BE(74),children:[]},s=78;n-s>=8;){var a=p.decode(e,s,n);o.children.push(a),o[a.type]=a,s+=a.length}return o},r.VisualSampleEntry.encodingLength=function(e){var t=78,r=e.children||[];return r.forEach(function(e){t+=p.encodingLength(e)}),t},r.avcC={},r.avcC.encode=function(e,n,i){n=n?n.slice(i):t(e.buffer.length),e.buffer.copy(n),r.avcC.encode.bytes=e.buffer.length},r.avcC.decode=function(e,r,n){return e=e.slice(r,n),{mimeCodec:e.toString("hex",1,4),buffer:new t(e)}},r.avcC.encodingLength=function(e){return e.buffer.length},r.mp4a=r.AudioSampleEntry={},r.AudioSampleEntry.encode=function(e,i,o){i=i?i.slice(o):new t(r.AudioSampleEntry.encodingLength(e)),n(i,0,6),i.writeUInt16BE(e.dataReferenceIndex||0,6),n(i,8,16),i.writeUInt16BE(e.channelCount||2,16),i.writeUInt16BE(e.sampleSize||16,18),n(i,20,24),i.writeUInt32BE(e.sampleRate||0,24);var s=28,a=e.children||[];a.forEach(function(e){p.encode(e,i,s),s+=p.encode.bytes}),r.AudioSampleEntry.encode.bytes=s},r.AudioSampleEntry.decode=function(e,t,r){e=e.slice(t,r);for(var n=r-t,i={dataReferenceIndex:e.readUInt16BE(6),channelCount:e.readUInt16BE(16),sampleSize:e.readUInt16BE(18),sampleRate:e.readUInt32BE(24),children:[]},o=28;n-o>=8;){var s=p.decode(e,o,n);i.children.push(s),i[s.type]=s,o+=s.length}return i},r.AudioSampleEntry.encodingLength=function(e){var t=28,r=e.children||[];return r.forEach(function(e){t+=p.encodingLength(e)}),t},r.esds={},r.esds.encode=function(e,n,i){n=n?n.slice(i):t(e.buffer.length),e.buffer.copy(n,0),r.esds.encode.bytes=e.buffer.length},r.esds.decode=function(e,r,n){e=e.slice(r,n);var i=g.Descriptor.decode(e,0,e.length),o="ESDescriptor"===i.tagName?i:{},s=o.DecoderConfigDescriptor||{},a=s.oti||0,u=s.DecoderSpecificInfo,f=u?(248&u.buffer.readUInt8(0))>>3:0,c=null;return a&&(c=a.toString(16),f&&(c+="."+f)),{mimeCodec:c,buffer:new t(e.slice(0))}},r.esds.encodingLength=function(e){return e.buffer.length},r.stsz={},r.stsz.encode=function(e,n,i){var o=e.entries||[];n=n?n.slice(i):t(r.stsz.encodingLength(e)),n.writeUInt32BE(0,0),n.writeUInt32BE(o.length,4);for(var s=0;s<o.length;s++)n.writeUInt32BE(o[s],4*s+8);return r.stsz.encode.bytes=8+4*o.length,n},r.stsz.decode=function(e,t){e=e.slice(t);for(var r=e.readUInt32BE(0),n=e.readUInt32BE(4),i=new Array(n),o=0;n>o;o++)0===r?i[o]=e.readUInt32BE(4*o+8):i[o]=r;return{entries:i}},r.stsz.encodingLength=function(e){return 8+4*e.entries.length},r.stss=r.stco={},r.stco.encode=function(e,n,i){var o=e.entries||[];n=n?n.slice(i):new t(r.stco.encodingLength(e)),n.writeUInt32BE(o.length,0);for(var s=0;s<o.length;s++)n.writeUInt32BE(o[s],4*s+4);return r.stco.encode.bytes=4+4*o.length,n},r.stco.decode=function(e,t){e=e.slice(t);for(var r=e.readUInt32BE(0),n=new Array(r),i=0;r>i;i++)n[i]=e.readUInt32BE(4*i+4);return{entries:n}},r.stco.encodingLength=function(e){return 4+4*e.entries.length},r.stts={},r.stts.encode=function(e,n,i){var o=e.entries||[];n=n?n.slice(i):new t(r.stts.encodingLength(e)),n.writeUInt32BE(o.length,0);for(var s=0;s<o.length;s++){var a=8*s+4;n.writeUInt32BE(o[s].count||0,a),n.writeUInt32BE(o[s].duration||0,a+4)}return r.stts.encode.bytes=4+8*e.entries.length,n},r.stts.decode=function(e,t){e=e.slice(t);for(var r=e.readUInt32BE(0),n=new Array(r),i=0;r>i;i++){var o=8*i+4;n[i]={count:e.readUInt32BE(o),duration:e.readUInt32BE(o+4)}}return{entries:n}},r.stts.encodingLength=function(e){return 4+8*e.entries.length},r.ctts={},r.ctts.encode=function(e,n,i){var o=e.entries||[];n=n?n.slice(i):new t(r.ctts.encodingLength(e)),n.writeUInt32BE(o.length,0);for(var s=0;s<o.length;s++){var a=8*s+4;n.writeUInt32BE(o[s].count||0,a),n.writeUInt32BE(o[s].compositionOffset||0,a+4)}return r.ctts.encode.bytes=4+8*o.length,n},r.ctts.decode=function(e,t){e=e.slice(t);for(var r=e.readUInt32BE(0),n=new Array(r),i=0;r>i;i++){var o=8*i+4;n[i]={count:e.readUInt32BE(o),compositionOffset:e.readInt32BE(o+4)}}return{entries:n}},r.ctts.encodingLength=function(e){return 4+8*e.entries.length},r.stsc={},r.stsc.encode=function(e,n,i){var o=e.entries||[];n=n?n.slice(i):new t(r.stsc.encodingLength(e)),n.writeUInt32BE(o.length,0);for(var s=0;s<o.length;s++){var a=12*s+4;n.writeUInt32BE(o[s].firstChunk||0,a),n.writeUInt32BE(o[s].samplesPerChunk||0,a+4),n.writeUInt32BE(o[s].sampleDescriptionId||0,a+8)}return r.stsc.encode.bytes=4+12*o.length,n},r.stsc.decode=function(e,t){e=e.slice(t);for(var r=e.readUInt32BE(0),n=new Array(r),i=0;r>i;i++){var o=12*i+4;n[i]={firstChunk:e.readUInt32BE(o),samplesPerChunk:e.readUInt32BE(o+4),sampleDescriptionId:e.readUInt32BE(o+8)}}return{entries:n}},r.stsc.encodingLength=function(e){return 4+12*e.entries.length},r.dref={},r.dref.encode=function(e,n,i){n=n?n.slice(i):new t(r.dref.encodingLength(e));var o=e.entries||[];n.writeUInt32BE(o.length,0);for(var s=4,a=0;a<o.length;a++){var u=o[a],f=(u.buf?u.buf.length:0)+4+4;n.writeUInt32BE(f,s),s+=4,n.write(u.type,s,4,"ascii"),s+=4,u.buf&&(u.buf.copy(n,s),s+=u.buf.length)}return r.dref.encode.bytes=s,n},r.dref.decode=function(e,t){e=e.slice(t);for(var r=e.readUInt32BE(0),n=new Array(r),i=4,o=0;r>o;o++){var s=e.readUInt32BE(i),a=e.toString("ascii",i+4,i+8),u=e.slice(i+8,i+s);i+=s,n[o]={type:a,buf:u}}return{entries:n}},r.dref.encodingLength=function(e){var t=4;if(!e.entries)return t;for(var r=0;r<e.entries.length;r++){var n=e.entries[r].buf;t+=(n?n.length:0)+4+4}return t},r.elst={},r.elst.encode=function(e,n,i){var s=e.entries||[];n=n?n.slice(i):new t(r.elst.encodingLength(e)),n.writeUInt32BE(s.length,0);for(var a=0;a<s.length;a++){var u=12*a+4;n.writeUInt32BE(s[a].trackDuration||0,u),n.writeUInt32BE(s[a].mediaTime||0,u+4),o(s[a].mediaRate||0,n,u+8)}return r.elst.encode.bytes=4+12*s.length,n},r.elst.decode=function(e,t){e=e.slice(t);for(var r=e.readUInt32BE(0),n=new Array(r),i=0;r>i;i++){var o=12*i+4;n[i]={trackDuration:e.readUInt32BE(o),mediaTime:e.readInt32BE(o+4),mediaRate:d(e,o+8)}}return{entries:n}},r.elst.encodingLength=function(e){return 4+12*e.entries.length},r.hdlr={},r.hdlr.encode=function(e,n,i){n=n?n.slice(i):new t(r.hdlr.encodingLength(e));var o=21+(e.name||"").length;return n.fill(0,0,o),n.write(e.handlerType||"",4,4,"ascii"),u(e.name||"",n,20),r.hdlr.encode.bytes=o,n},r.hdlr.decode=function(e,t,r){return e=e.slice(t),{handlerType:e.toString("ascii",4,8),name:l(e,20,r)}},r.hdlr.encodingLength=function(e){return 21+(e.name||"").length},r.mehd={},r.mehd.encode=function(e,n,i){return n=n?n.slice(i):new t(4),n.writeUInt32BE(e.fragmentDuration||0,0),r.mehd.encode.bytes=4,n},r.mehd.decode=function(e,t){return e=e.slice(t),{fragmentDuration:e.readUInt32BE(0)}},r.mehd.encodingLength=function(e){return 4},r.trex={},r.trex.encode=function(e,n,i){return n=n?n.slice(i):new t(20),n.writeUInt32BE(e.trackId||0,0),n.writeUInt32BE(e.defaultSampleDescriptionIndex||0,4),n.writeUInt32BE(e.defaultSampleDuration||0,8),n.writeUInt32BE(e.defaultSampleSize||0,12),n.writeUInt32BE(e.defaultSampleFlags||0,16),r.trex.encode.bytes=20,n},r.trex.decode=function(e,t){return e=e.slice(t),{trackId:e.readUInt32BE(0),defaultSampleDescriptionIndex:e.readUInt32BE(4),defaultSampleDuration:e.readUInt32BE(8),defaultSampleSize:e.readUInt32BE(12),defaultSampleFlags:e.readUInt32BE(16)}},r.trex.encodingLength=function(e){return 20},r.mfhd={},r.mfhd.encode=function(e,n,i){return n=n?n.slice(i):new t(4),n.writeUInt32BE(e.sequenceNumber||0,0),r.mfhd.encode.bytes=4,n},r.mfhd.decode=function(e,t){return{sequenceNumber:e.readUint32BE(0)}},r.mfhd.encodingLength=function(e){return 4},r.tfhd={},r.tfhd.encode=function(e,n,i){return n=n?n.slice(i):new t(4),n.writeUInt32BE(e.trackId,0),r.tfhd.encode.bytes=4,n},r.tfhd.decode=function(e,t){},r.tfhd.encodingLength=function(e){return 4},r.tfdt={},r.tfdt.encode=function(e,n,i){return n=n?n.slice(i):new t(4),n.writeUInt32BE(e.baseMediaDecodeTime||0,0),r.tfdt.encode.bytes=4,n},r.tfdt.decode=function(e,t){},r.tfdt.encodingLength=function(e){return 4},r.trun={},r.trun.encode=function(e,n,i){n=n?n.slice(i):new t(8+16*e.entries.length),n.writeUInt32BE(e.entries.length,0),n.writeInt32BE(e.dataOffset,4);for(var o=8,s=0;s<e.entries.length;s++){var a=e.entries[s];n.writeUInt32BE(a.sampleDuration,o),o+=4,n.writeUInt32BE(a.sampleSize,o),o+=4,n.writeUInt32BE(a.sampleFlags,o),o+=4,n.writeUInt32BE(a.sampleCompositionTimeOffset,o),o+=4}r.trun.encode.bytes=o},r.trun.decode=function(e,t){},r.trun.encodingLength=function(e){return 8+16*e.entries.length},r.mdat={},r.mdat.encode=function(e,t,n){e.buffer?(e.buffer.copy(t,n),r.mdat.encode.bytes=e.buffer.length):r.mdat.encode.bytes=r.mdat.encodingLength(e)},r.mdat.decode=function(e,r,n){return{buffer:new t(e.slice(r,n))}},r.mdat.encodingLength=function(e){return e.buffer?e.buffer.length:e.contentLength}}).call(this,e("buffer").Buffer)},{"./descriptor":16,"./index":17,buffer:6}],16:[function(e,t,r){(function(e){var t={3:"ESDescriptor",4:"DecoderConfigDescriptor",5:"DecoderSpecificInfo",6:"SLConfigDescriptor"};r.Descriptor={},r.Descriptor.decode=function(n,i,o){var s,a=n.readUInt8(i),u=i+1,f=0;do s=n.readUInt8(u++),f=f<<7|127&s;while(128&s);var c,d=t[a];return c=r[d]?r[d].decode(n,u,o):{buffer:new e(n.slice(u,u+f))},c.tag=a,c.tagName=d,c.length=u-i+f,c.contentsLen=f,c},r.DescriptorArray={},r.DescriptorArray.decode=function(e,n,i){for(var o=n,s={};i>=o+2;){var a=r.Descriptor.decode(e,o,i);o+=a.length;var u=t[a.tag]||"Descriptor"+a.tag;s[u]=a}return s},r.ESDescriptor={},r.ESDescriptor.decode=function(e,t,n){var i=e.readUInt8(t+2),o=t+3;if(128&i&&(o+=2),64&i){var s=e.readUInt8(o);o+=s+1}return 32&i&&(o+=2),r.DescriptorArray.decode(e,o,n)},r.DecoderConfigDescriptor={},r.DecoderConfigDescriptor.decode=function(e,t,n){var i=e.readUInt8(t),o=r.DescriptorArray.decode(e,t+13,n);return o.oti=i,o}}).call(this,e("buffer").Buffer)},{buffer:6}],17:[function(e,t,r){(function(t){var n=e("uint64be"),i=e("./boxes"),o=4294967295,s=r,a=r.containers={moov:["mvhd","meta","traks","mvex"],trak:["tkhd","tref","trgr","edts","meta","mdia","udta"],edts:["elst"],mdia:["mdhd","hdlr","elng","minf"],minf:["vmhd","smhd","hmhd","sthd","nmhd","dinf","stbl"],dinf:["dref"],stbl:["stsd","stts","ctts","cslg","stsc","stsz","stz2","stco","co64","stss","stsh","padb","stdp","sdtp","sbgps","sgpds","subss","saizs","saios"],mvex:["mehd","trexs","leva"],moof:["mfhd","meta","trafs"],traf:["tfhd","trun","sbgps","sgpds","subss","saizs","saios","tfdt","meta"]};s.encode=function(e,r,n){return s.encodingLength(e),n=n||0,r=r||new t(e.length),s._encode(e,r,n)},s._encode=function(e,t,r){var u=e.type,f=e.length;f>o&&(f=1),t.writeUInt32BE(f,r),t.write(e.type,r+4,4,"ascii");var c=r+8;if(1===f&&(n.encode(e.length,t,c),c+=8),i.fullBoxes[u]&&(t.writeUInt32BE(e.flags||0,c),t.writeUInt8(e.version||0,c),c+=4),a[u]){var d=a[u];d.forEach(function(r){if(5===r.length){var n=e[r]||[];r=r.substr(0,4),n.forEach(function(e){s._encode(e,t,c),c+=s.encode.bytes})}else e[r]&&(s._encode(e[r],t,c),c+=s.encode.bytes)}),e.otherBoxes&&e.otherBoxes.forEach(function(e){s._encode(e,t,c),c+=s.encode.bytes})}else if(i[u]){var h=i[u].encode;h(e,t,c),c+=h.bytes}else{if(!e.buffer)throw new Error("Either `type` must be set to a known type (not'"+u+"') or `buffer` must be set");var l=e.buffer;l.copy(t,c),c+=e.buffer.length}return s.encode.bytes=c-r,t},s.readHeaders=function(e,t,r){if(t=t||0,r=r||e.length,8>r-t)return 8;var o=e.readUInt32BE(t),s=e.toString("ascii",t+4,t+8),a=t+8;if(1===o){if(16>r-t)return 16;o=n.decode(e,a),a+=8}var u,f;return i.fullBoxes[s]&&(u=e.readUInt8(a),f=16777215&e.readUInt32BE(a),a+=4),{length:o,headersLen:a-t,contentLen:o-(a-t),type:s,version:u,flags:f}},s.decode=function(e,t,r){t=t||0,r=r||e.length;var n=s.readHeaders(e,t,r);if(!n||n.length>r-t)throw new Error("Data too short");return s.decodeWithoutHeaders(n,e,t+n.headersLen,t+n.length)},s.decodeWithoutHeaders=function(e,r,n,o){n=n||0,o=o||r.length;var u=e.type,f={};if(a[u]){f.otherBoxes=[];for(var c=a[u],d=n;o-d>=8;){var h=s.decode(r,d,o);if(d+=h.length,c.indexOf(h.type)>=0)f[h.type]=h;else if(c.indexOf(h.type+"s")>=0){var l=h.type+"s",p=f[l]=f[l]||[];p.push(h)}else f.otherBoxes.push(h)}}else if(i[u]){var g=i[u].decode;f=g(r,n,o)}else f.buffer=new t(r.slice(n,o));return f.length=e.length,f.contentLen=e.contentLen,f.type=e.type,f.version=e.version,f.flags=e.flags,f},s.encodingLength=function(e){var t=e.type,r=8;if(i.fullBoxes[t]&&(r+=4),a[t]){var n=a[t];n.forEach(function(t){if(5===t.length){var n=e[t]||[];t=t.substr(0,4),n.forEach(function(e){e.type=t,r+=s.encodingLength(e)})}else if(e[t]){var i=e[t];i.type=t,r+=s.encodingLength(i)}}),e.otherBoxes&&e.otherBoxes.forEach(function(e){r+=s.encodingLength(e)})}else if(i[t])r+=i[t].encodingLength(e);else{if(!e.buffer)throw new Error("Either `type` must be set to a known type (not'"+t+"') or `buffer` must be set");r+=e.buffer.length}return r>o&&(r+=8),e.length=r,r}}).call(this,e("buffer").Buffer)},{"./boxes":15,buffer:6,uint64be:36}],18:[function(e,t,r){(function(r){function n(){return this instanceof n?(o.Writable.call(this),this.destroyed=!1,this._pending=0,this._missing=0,this._buf=null,this._str=null,this._cb=null,this._ondrain=null,this._writeBuffer=null,this._writeCb=null,this._ondrain=null,void this._kick()):new n}function i(e){this._parent=e,this.destroyed=!1,o.PassThrough.call(this)}var o=e("readable-stream"),s=e("inherits"),a=e("next-event"),u=e("mp4-box-encoding"),f=new r(0);t.exports=n,s(n,o.Writable),n.prototype.destroy=function(e){this.destroyed||(this.destroyed=!0,e&&this.emit("error",e),this.emit("close"))},n.prototype._write=function(e,t,r){if(!this.destroyed){for(var n=!this._str||!this._str._writableState.needDrain;e.length&&!this.destroyed;){if(!this._missing)return this._writeBuffer=e,void(this._writeCb=r);var i=e.length<this._missing?e.length:this._missing;if(this._buf?e.copy(this._buf,this._buf.length-this._missing):this._str&&(n=this._str.write(i===e.length?e:e.slice(0,i))),this._missing-=i,!this._missing){var o=this._buf,s=this._cb,a=this._str;this._buf=this._cb=this._str=this._ondrain=null,n=!0,a&&a.end(),s&&s(o)}e=i===e.length?f:e.slice(i)}return this._pending&&!this._missing?(this._writeBuffer=e,void(this._writeCb=r)):void(n?r():this._ondrain(r))}},n.prototype._buffer=function(e,t){this._missing=e,this._buf=new r(e),this._cb=t},n.prototype._stream=function(e,t){var r=this;return this._missing=e,this._str=new i(this),this._ondrain=a(this._str,"drain"),this._pending++,this._str.on("end",function(){r._pending--,r._kick()}),this._cb=t,this._str},n.prototype._readBox=function(){function e(n,i){t._buffer(n,function(n){i=i?r.concat(i,n):n;var o=u.readHeaders(i);"number"==typeof o?e(o-i.length,i):(t._pending++,t._headers=o,t.emit("box",o))})}var t=this;e(8)},n.prototype.stream=function(){var e=this;if(!e._headers)throw new Error("this function can only be called once after 'box' is emitted");var t=e._headers;return e._headers=null,e._stream(t.contentLen,null)},n.prototype.decode=function(e){var t=this;if(!t._headers)throw new Error("this function can only be called once after 'box' is emitted");var r=t._headers;t._headers=null,t._buffer(r.contentLen,function(n){var i=u.decodeWithoutHeaders(r,n);e(i),t._pending--,t._kick()})},n.prototype.ignore=function(){var e=this;if(!e._headers)throw new Error("this function can only be called once after 'box' is emitted");var t=e._headers;e._headers=null,this._missing=t.contentLen,this._cb=function(){e._pending--,e._kick()}},n.prototype._kick=function(){if(!this._pending&&(this._buf||this._str||this._readBox(),this._writeBuffer)){var e=this._writeCb,t=this._writeBuffer;this._writeBuffer=null,this._writeCb=null,this._write(t,null,e)}},s(i,o.PassThrough),i.prototype.destroy=function(e){this.destroyed||(this.destroyed=!0,this._parent.destroy(e),e&&this.emit("error",e),this.emit("close"))}}).call(this,e("buffer").Buffer)},{buffer:6,inherits:12,"mp4-box-encoding":17,"next-event":21,"readable-stream":33}],19:[function(e,t,r){(function(r,n){function i(){}function o(){function e(){r._want&&(r._want=!1,r._read())}function t(){r._stream=null}if(!(this instanceof o))return new o;a.Readable.call(this),this.destroyed=!1,this._reading=!1,this._stream=null,this._drain=null,this._want=!1,this._onreadable=e,this._onend=t;var r=this}function s(e){this._parent=e,this.destroyed=!1,a.PassThrough.call(this)}var a=e("readable-stream"),u=e("inherits"),f=e("mp4-box-encoding");t.exports=o,u(o,a.Readable),o.prototype.mediaData=o.prototype.mdat=function(e,t){var r=new s(this);return this.box({type:"mdat",contentLength:e,encodeBufferLen:8,stream:r},t),r},o.prototype.box=function(e,t){if(t||(t=i),this.destroyed)return t(new Error("Encoder is destroyed"));var o;if(e.encodeBufferLen&&(o=new n(e.encodeBufferLen)),e.stream)e.buffer=null,o=f.encode(e,o),this.push(o),this._stream=e.stream,this._stream.on("readable",this._onreadable),this._stream.on("end",this._onend),this._stream.on("end",t),this._forward();else{o=f.encode(e,o);var s=this.push(o);if(s)return r.nextTick(t);this._drain=t}},o.prototype.destroy=function(e){if(!this.destroyed){if(this.destroyed=!0,this._stream&&this._stream.destroy&&this._stream.destroy(),this._stream=null,this._drain){var t=this._drain;this._drain=null,t(e)}e&&this.emit("error",e),this.emit("close")}},o.prototype.finalize=function(){this.push(null)},o.prototype._forward=function(){if(this._stream)for(;!this.destroyed;){var e=this._stream.read();if(!e)return void(this._want=!!this._stream);if(!this.push(e))return}},o.prototype._read=function(){if(!this._reading&&!this.destroyed){if(this._reading=!0,this._stream&&this._forward(),this._drain){var e=this._drain;this._drain=null,e()}this._reading=!1}},u(s,a.PassThrough),s.prototype.destroy=function(e){this.destroyed||(this.destroyed=!0,this._parent.destroy(e),e&&this.emit("error",e),this.emit("close"))}}).call(this,e("_process"),e("buffer").Buffer)},{_process:24,buffer:6,inherits:12,"mp4-box-encoding":17,"readable-stream":33}],20:[function(e,t,r){r.decode=e("./decode"),r.encode=e("./encode")},{"./decode":18,"./encode":19}],21:[function(e,t,r){function n(e,t){var r=null;return e.on(t,function(e){if(r){var t=r;r=null,t(e)}}),function(e){r=e}}t.exports=n},{}],22:[function(e,t,r){function n(e){var t=function(){return t.called?t.value:(t.called=!0,t.value=e.apply(this,arguments))};return t.called=!1,t}var i=e("wrappy");t.exports=i(n),n.proto=n(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return n(this)},configurable:!0})})},{wrappy:38}],23:[function(e,t,r){(function(e){"use strict";function r(t){for(var r=new Array(arguments.length-1),n=0;n<r.length;)r[n++]=arguments[n];e.nextTick(function(){t.apply(null,r)})}!e.version||0===e.version.indexOf("v0.")||0===e.version.indexOf("v1.")&&0!==e.version.indexOf("v1.8.")?t.exports=r:t.exports=e.nextTick}).call(this,e("_process"))},{_process:24}],24:[function(e,t,r){function n(){c=!1,a.length?f=a.concat(f):d=-1,f.length&&i()}function i(){if(!c){var e=setTimeout(n);c=!0;for(var t=f.length;t;){for(a=f,f=[];++d<t;)a&&a[d].run();d=-1,t=f.length}a=null,c=!1,clearTimeout(e)}}function o(e,t){this.fun=e,this.array=t}function s(){}var a,u=t.exports={},f=[],c=!1,d=-1;u.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];f.push(new o(e,t)),1!==f.length||c||setTimeout(i,0)},o.prototype.run=function(){this.fun.apply(null,this.array)},u.title="browser",u.browser=!0,u.env={},u.argv=[],u.version="",u.versions={},u.on=s,u.addListener=s,u.once=s,u.off=s,u.removeListener=s,u.removeAllListeners=s,u.emit=s,u.binding=function(e){throw new Error("process.binding is not supported")},u.cwd=function(){return"/"},u.chdir=function(e){throw new Error("process.chdir is not supported")},u.umask=function(){return 0}},{}],25:[function(e,t,r){var n=e("once"),i=e("end-of-stream"),o=e("fs"),s=function(){},a=function(e){return"function"==typeof e},u=function(e){return(e instanceof(o.ReadStream||s)||e instanceof(o.WriteStream||s))&&a(e.close)},f=function(e){return e.setHeader&&a(e.abort)},c=function(e,t,r,o){o=n(o);var s=!1;e.on("close",function(){s=!0}),i(e,{readable:t,writable:r},function(e){return e?o(e):(s=!0,void o())});var c=!1;return function(t){
return s||c?void 0:(c=!0,u(e)?e.close():f(e)?e.abort():a(e.destroy)?e.destroy():void o(t||new Error("stream was destroyed")))}},d=function(e){e()},h=function(e,t){return e.pipe(t)},l=function(){var e=Array.prototype.slice.call(arguments),t=a(e[e.length-1]||s)&&e.pop()||s;if(Array.isArray(e[0])&&(e=e[0]),e.length<2)throw new Error("pump requires two streams per minimum");var r,n=e.map(function(i,o){var s=o<e.length-1,a=o>0;return c(i,s,a,function(e){r||(r=e),e&&n.forEach(d),s||(n.forEach(d),t(r))})});return e.reduce(h)};t.exports=l},{"end-of-stream":9,fs:5,once:22}],26:[function(e,t,r){function n(e){var t=this;return t instanceof n?(o.Writable.call(t),t.destroyed=!1,t._queue=[],t._position=e||0,t._cb=null,t._buffer=null,void(t._out=null)):new n(e)}var i=e("inherits"),o=e("readable-stream");t.exports=n,i(n,o.Writable),n.prototype._write=function(e,t,r){for(var n=this,i=!0;;){if(n.destroyed)return;if(0===n._queue.length)return n._buffer=e,void(n._cb=r);n._buffer=null;var o=n._queue[0],s=Math.max(o.start-n._position,0),a=o.end-n._position;if(s>=e.length)return n._position+=e.length,r(null);var u;if(a>e.length){n._position+=e.length,u=0===s?e:e.slice(s),i=o.stream.write(u)&&i;break}n._position+=a,u=0===s&&a===e.length?e:e.slice(s,a),i=o.stream.write(u)&&i,o.last&&o.stream.end(),e=e.slice(a),n._queue.shift()}i?r(null):o.stream.once("drain",r.bind(null,null))},n.prototype.slice=function(e){var t=this;if(t.destroyed)return null;e instanceof Array||(e=[e]);var r=new o.PassThrough;return e.forEach(function(n,i){t._queue.push({start:n.start,end:n.end,stream:r,last:i===e.length-1})}),t._buffer&&t._write(t._buffer,null,t._cb),r},n.prototype.destroy=function(e){var t=this;t.destroyed||(t.destroyed=!0,e&&t.emit("error",e))}},{inherits:12,"readable-stream":33}],27:[function(e,t,r){"use strict";function n(e){return this instanceof n?(f.call(this,e),c.call(this,e),e&&e.readable===!1&&(this.readable=!1),e&&e.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,e&&e.allowHalfOpen===!1&&(this.allowHalfOpen=!1),void this.once("end",i)):new n(e)}function i(){this.allowHalfOpen||this._writableState.ended||a(o,this)}function o(e){e.end()}var s=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};t.exports=n;var a=e("process-nextick-args"),u=e("core-util-is");u.inherits=e("inherits");var f=e("./_stream_readable"),c=e("./_stream_writable");u.inherits(n,f);for(var d=s(c.prototype),h=0;h<d.length;h++){var l=d[h];n.prototype[l]||(n.prototype[l]=c.prototype[l])}},{"./_stream_readable":29,"./_stream_writable":31,"core-util-is":8,inherits:12,"process-nextick-args":23}],28:[function(e,t,r){"use strict";function n(e){return this instanceof n?void i.call(this,e):new n(e)}t.exports=n;var i=e("./_stream_transform"),o=e("core-util-is");o.inherits=e("inherits"),o.inherits(n,i),n.prototype._transform=function(e,t,r){r(null,e)}},{"./_stream_transform":30,"core-util-is":8,inherits:12}],29:[function(e,t,r){(function(r){"use strict";function n(t,r){D=D||e("./_stream_duplex"),t=t||{},this.objectMode=!!t.objectMode,r instanceof D&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var n=t.highWaterMark,i=this.objectMode?16:16384;this.highWaterMark=n||0===n?n:i,this.highWaterMark=~~this.highWaterMark,this.buffer=[],this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(M||(M=e("string_decoder/").StringDecoder),this.decoder=new M(t.encoding),this.encoding=t.encoding)}function i(t){return D=D||e("./_stream_duplex"),this instanceof i?(this._readableState=new n(t,this),this.readable=!0,t&&"function"==typeof t.read&&(this._read=t.read),void x.call(this)):new i(t)}function o(e,t,r,n,i){var o=f(t,r);if(o)e.emit("error",o);else if(null===r)t.reading=!1,c(e,t);else if(t.objectMode||r&&r.length>0)if(t.ended&&!i){var a=new Error("stream.push() after EOF");e.emit("error",a)}else if(t.endEmitted&&i){var a=new Error("stream.unshift() after end event");e.emit("error",a)}else{var u;!t.decoder||i||n||(r=t.decoder.write(r),u=!t.objectMode&&0===r.length),i||(t.reading=!1),u||(t.flowing&&0===t.length&&!t.sync?(e.emit("data",r),e.read(0)):(t.length+=t.objectMode?1:r.length,i?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&d(e))),l(e,t)}else i||(t.reading=!1);return s(t)}function s(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}function a(e){return e>=C?e=C:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function u(e,t){return 0===t.length&&t.ended?0:t.objectMode?0===e?0:1:null===e||isNaN(e)?t.flowing&&t.buffer.length?t.buffer[0].length:t.length:0>=e?0:(e>t.highWaterMark&&(t.highWaterMark=a(e)),e>t.length?t.ended?t.length:(t.needReadable=!0,0):e)}function f(e,t){var r=null;return L.isBuffer(t)||"string"==typeof t||null===t||void 0===t||e.objectMode||(r=new TypeError("Invalid non-string/buffer chunk")),r}function c(e,t){if(!t.ended){if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,d(e)}}function d(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(T("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?I(h,e):h(e))}function h(e){T("emit readable"),e.emit("readable"),y(e)}function l(e,t){t.readingMore||(t.readingMore=!0,I(p,e,t))}function p(e,t){for(var r=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(T("maybeReadMore read 0"),e.read(0),r!==t.length);)r=t.length;t.readingMore=!1}function g(e){return function(){var t=e._readableState;T("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&k(e,"data")&&(t.flowing=!0,y(e))}}function m(e){T("readable nexttick read 0"),e.read(0)}function v(e,t){t.resumeScheduled||(t.resumeScheduled=!0,I(_,e,t))}function _(e,t){t.reading||(T("resume read 0"),e.read(0)),t.resumeScheduled=!1,e.emit("resume"),y(e),t.flowing&&!t.reading&&e.read(0)}function y(e){var t=e._readableState;if(T("flow",t.flowing),t.flowing)do var r=e.read();while(null!==r&&t.flowing)}function w(e,t){var r,n=t.buffer,i=t.length,o=!!t.decoder,s=!!t.objectMode;if(0===n.length)return null;if(0===i)r=null;else if(s)r=n.shift();else if(!e||e>=i)r=o?n.join(""):1===n.length?n[0]:L.concat(n,i),n.length=0;else if(e<n[0].length){var a=n[0];r=a.slice(0,e),n[0]=a.slice(e)}else if(e===n[0].length)r=n.shift();else{r=o?"":new L(e);for(var u=0,f=0,c=n.length;c>f&&e>u;f++){var a=n[0],d=Math.min(e-u,a.length);o?r+=a.slice(0,d):a.copy(r,u,0,d),d<a.length?n[0]=a.slice(d):n.shift(),u+=d}}return r}function b(e){var t=e._readableState;if(t.length>0)throw new Error("endReadable called on non-empty stream");t.endEmitted||(t.ended=!0,I(E,t,e))}function E(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function B(e,t){for(var r=0,n=e.length;n>r;r++)t(e[r],r)}function S(e,t){for(var r=0,n=e.length;n>r;r++)if(e[r]===t)return r;return-1}t.exports=i;var I=e("process-nextick-args"),U=e("isarray"),L=e("buffer").Buffer;i.ReadableState=n;var x,k=(e("events"),function(e,t){return e.listeners(t).length});!function(){try{x=e("stream")}catch(t){}finally{x||(x=e("events").EventEmitter)}}();var L=e("buffer").Buffer,R=e("core-util-is");R.inherits=e("inherits");var A=e("util"),T=void 0;T=A&&A.debuglog?A.debuglog("stream"):function(){};var M;R.inherits(i,x);var D,D;i.prototype.push=function(e,t){var r=this._readableState;return r.objectMode||"string"!=typeof e||(t=t||r.defaultEncoding,t!==r.encoding&&(e=new L(e,t),t="")),o(this,r,e,t,!1)},i.prototype.unshift=function(e){var t=this._readableState;return o(this,t,e,"",!0)},i.prototype.isPaused=function(){return this._readableState.flowing===!1},i.prototype.setEncoding=function(t){return M||(M=e("string_decoder/").StringDecoder),this._readableState.decoder=new M(t),this._readableState.encoding=t,this};var C=8388608;i.prototype.read=function(e){T("read",e);var t=this._readableState,r=e;if(("number"!=typeof e||e>0)&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return T("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?b(this):d(this),null;if(e=u(e,t),0===e&&t.ended)return 0===t.length&&b(this),null;var n=t.needReadable;T("need readable",n),(0===t.length||t.length-e<t.highWaterMark)&&(n=!0,T("length less than watermark",n)),(t.ended||t.reading)&&(n=!1,T("reading or ended",n)),n&&(T("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1),n&&!t.reading&&(e=u(r,t));var i;return i=e>0?w(e,t):null,null===i&&(t.needReadable=!0,e=0),t.length-=e,0!==t.length||t.ended||(t.needReadable=!0),r!==e&&t.ended&&0===t.length&&b(this),null!==i&&this.emit("data",i),i},i.prototype._read=function(e){this.emit("error",new Error("not implemented"))},i.prototype.pipe=function(e,t){function n(e){T("onunpipe"),e===d&&o()}function i(){T("onend"),e.end()}function o(){T("cleanup"),e.removeListener("close",u),e.removeListener("finish",f),e.removeListener("drain",m),e.removeListener("error",a),e.removeListener("unpipe",n),d.removeListener("end",i),d.removeListener("end",o),d.removeListener("data",s),v=!0,!h.awaitDrain||e._writableState&&!e._writableState.needDrain||m()}function s(t){T("ondata");var r=e.write(t);!1===r&&(1!==h.pipesCount||h.pipes[0]!==e||1!==d.listenerCount("data")||v||(T("false write response, pause",d._readableState.awaitDrain),d._readableState.awaitDrain++),d.pause())}function a(t){T("onerror",t),c(),e.removeListener("error",a),0===k(e,"error")&&e.emit("error",t)}function u(){e.removeListener("finish",f),c()}function f(){T("onfinish"),e.removeListener("close",u),c()}function c(){T("unpipe"),d.unpipe(e)}var d=this,h=this._readableState;switch(h.pipesCount){case 0:h.pipes=e;break;case 1:h.pipes=[h.pipes,e];break;default:h.pipes.push(e)}h.pipesCount+=1,T("pipe count=%d opts=%j",h.pipesCount,t);var l=(!t||t.end!==!1)&&e!==r.stdout&&e!==r.stderr,p=l?i:o;h.endEmitted?I(p):d.once("end",p),e.on("unpipe",n);var m=g(d);e.on("drain",m);var v=!1;return d.on("data",s),e._events&&e._events.error?U(e._events.error)?e._events.error.unshift(a):e._events.error=[a,e._events.error]:e.on("error",a),e.once("close",u),e.once("finish",f),e.emit("pipe",d),h.flowing||(T("pipe resume"),d.resume()),e},i.prototype.unpipe=function(e){var t=this._readableState;if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this),this);if(!e){var r=t.pipes,n=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var i=0;n>i;i++)r[i].emit("unpipe",this);return this}var o=S(t.pipes,e);return-1===o?this:(t.pipes.splice(o,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this),this)},i.prototype.on=function(e,t){var r=x.prototype.on.call(this,e,t);if("data"===e&&!1!==this._readableState.flowing&&this.resume(),"readable"===e&&!this._readableState.endEmitted){var n=this._readableState;n.readableListening||(n.readableListening=!0,n.emittedReadable=!1,n.needReadable=!0,n.reading?n.length&&d(this,n):I(m,this))}return r},i.prototype.addListener=i.prototype.on,i.prototype.resume=function(){var e=this._readableState;return e.flowing||(T("resume"),e.flowing=!0,v(this,e)),this},i.prototype.pause=function(){return T("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(T("pause"),this._readableState.flowing=!1,this.emit("pause")),this},i.prototype.wrap=function(e){var t=this._readableState,r=!1,n=this;e.on("end",function(){if(T("wrapped end"),t.decoder&&!t.ended){var e=t.decoder.end();e&&e.length&&n.push(e)}n.push(null)}),e.on("data",function(i){if(T("wrapped data"),t.decoder&&(i=t.decoder.write(i)),(!t.objectMode||null!==i&&void 0!==i)&&(t.objectMode||i&&i.length)){var o=n.push(i);o||(r=!0,e.pause())}});for(var i in e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));var o=["error","close","destroy","pause","resume"];return B(o,function(t){e.on(t,n.emit.bind(n,t))}),n._read=function(t){T("wrapped _read",t),r&&(r=!1,e.resume())},n},i._fromList=w}).call(this,e("_process"))},{"./_stream_duplex":27,_process:24,buffer:6,"core-util-is":8,events:10,inherits:12,isarray:32,"process-nextick-args":23,"string_decoder/":34,util:4}],30:[function(e,t,r){"use strict";function n(e){this.afterTransform=function(t,r){return i(e,t,r)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function i(e,t,r){var n=e._transformState;n.transforming=!1;var i=n.writecb;if(!i)return e.emit("error",new Error("no writecb in Transform class"));n.writechunk=null,n.writecb=null,null!==r&&void 0!==r&&e.push(r),i(t);var o=e._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&e._read(o.highWaterMark)}function o(e){if(!(this instanceof o))return new o(e);a.call(this,e),this._transformState=new n(this);var t=this;this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.once("prefinish",function(){"function"==typeof this._flush?this._flush(function(e){s(t,e)}):s(t)})}function s(e,t){if(t)return e.emit("error",t);var r=e._writableState,n=e._transformState;if(r.length)throw new Error("calling transform done when ws.length != 0");if(n.transforming)throw new Error("calling transform done when still transforming");return e.push(null)}t.exports=o;var a=e("./_stream_duplex"),u=e("core-util-is");u.inherits=e("inherits"),u.inherits(o,a),o.prototype.push=function(e,t){return this._transformState.needTransform=!1,a.prototype.push.call(this,e,t)},o.prototype._transform=function(e,t,r){throw new Error("not implemented")},o.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},o.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0}},{"./_stream_duplex":27,"core-util-is":8,inherits:12}],31:[function(e,t,r){(function(r){"use strict";function n(){}function i(e,t,r){this.chunk=e,this.encoding=t,this.callback=r,this.next=null}function o(t,r){k=k||e("./_stream_duplex"),t=t||{},this.objectMode=!!t.objectMode,r instanceof k&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var n=t.highWaterMark,i=this.objectMode?16:16384;this.highWaterMark=n||0===n?n:i,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var o=t.decodeStrings===!1;this.decodeStrings=!o,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){p(r,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new E(this),this.corkedRequestsFree.next=new E(this)}function s(t){return k=k||e("./_stream_duplex"),this instanceof s||this instanceof k?(this._writableState=new o(t,this),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev)),void L.call(this)):new s(t)}function a(e,t){var r=new Error("write after end");e.emit("error",r),B(t,r)}function u(e,t,r,n){var i=!0;if(!I.isBuffer(r)&&"string"!=typeof r&&null!==r&&void 0!==r&&!t.objectMode){var o=new TypeError("Invalid non-string/buffer chunk");e.emit("error",o),B(n,o),i=!1}return i}function f(e,t,r){return e.objectMode||e.decodeStrings===!1||"string"!=typeof t||(t=new I(t,r)),t}function c(e,t,r,n,o){r=f(t,r,n),I.isBuffer(r)&&(n="buffer");var s=t.objectMode?1:r.length;t.length+=s;var a=t.length<t.highWaterMark;if(a||(t.needDrain=!0),t.writing||t.corked){var u=t.lastBufferedRequest;t.lastBufferedRequest=new i(r,n,o),u?u.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else d(e,t,!1,s,r,n,o);return a}function d(e,t,r,n,i,o,s){t.writelen=n,t.writecb=s,t.writing=!0,t.sync=!0,r?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function h(e,t,r,n,i){--t.pendingcb,r?B(i,n):i(n),e._writableState.errorEmitted=!0,e.emit("error",n)}function l(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function p(e,t){var r=e._writableState,n=r.sync,i=r.writecb;if(l(r),t)h(e,r,n,t,i);else{var o=_(r);o||r.corked||r.bufferProcessing||!r.bufferedRequest||v(e,r),n?S(g,e,r,o,i):g(e,r,o,i)}}function g(e,t,r,n){r||m(e,t),t.pendingcb--,n(),w(e,t)}function m(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function v(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var n=t.bufferedRequestCount,i=new Array(n),o=t.corkedRequestsFree;o.entry=r;for(var s=0;r;)i[s]=r,r=r.next,s+=1;d(e,t,!0,t.length,i,"",o.finish),t.pendingcb++,t.lastBufferedRequest=null,t.corkedRequestsFree=o.next,o.next=null}else{for(;r;){var a=r.chunk,u=r.encoding,f=r.callback,c=t.objectMode?1:a.length;if(d(e,t,!1,c,a,u,f),r=r.next,t.writing)break}null===r&&(t.lastBufferedRequest=null)}t.bufferedRequestCount=0,t.bufferedRequest=r,t.bufferProcessing=!1}function _(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function y(e,t){t.prefinished||(t.prefinished=!0,e.emit("prefinish"))}function w(e,t){var r=_(t);return r&&(0===t.pendingcb?(y(e,t),t.finished=!0,e.emit("finish")):y(e,t)),r}function b(e,t,r){t.ending=!0,w(e,t),r&&(t.finished?B(r):e.once("finish",r)),t.ended=!0,e.writable=!1}function E(e){var t=this;this.next=null,this.entry=null,this.finish=function(r){var n=t.entry;for(t.entry=null;n;){var i=n.callback;e.pendingcb--,i(r),n=n.next}e.corkedRequestsFree?e.corkedRequestsFree.next=t:e.corkedRequestsFree=t}}t.exports=s;var B=e("process-nextick-args"),S=!r.browser&&["v0.10","v0.9."].indexOf(r.version.slice(0,5))>-1?setImmediate:B,I=e("buffer").Buffer;s.WritableState=o;var U=e("core-util-is");U.inherits=e("inherits");var L,x={deprecate:e("util-deprecate")};!function(){try{L=e("stream")}catch(t){}finally{L||(L=e("events").EventEmitter)}}();var I=e("buffer").Buffer;U.inherits(s,L);var k;o.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(o.prototype,"buffer",{get:x.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.")})}catch(e){}}();var k;s.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe. Not readable."))},s.prototype.write=function(e,t,r){var i=this._writableState,o=!1;return"function"==typeof t&&(r=t,t=null),I.isBuffer(e)?t="buffer":t||(t=i.defaultEncoding),"function"!=typeof r&&(r=n),i.ended?a(this,r):u(this,i,e,r)&&(i.pendingcb++,o=c(this,i,e,t,r)),o},s.prototype.cork=function(){var e=this._writableState;e.corked++},s.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||v(this,e))},s.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);this._writableState.defaultEncoding=e},s.prototype._write=function(e,t,r){r(new Error("not implemented"))},s.prototype._writev=null,s.prototype.end=function(e,t,r){var n=this._writableState;"function"==typeof e?(r=e,e=null,t=null):"function"==typeof t&&(r=t,t=null),null!==e&&void 0!==e&&this.write(e,t),n.corked&&(n.corked=1,this.uncork()),n.ending||n.finished||b(this,n,r)}}).call(this,e("_process"))},{"./_stream_duplex":27,_process:24,buffer:6,"core-util-is":8,events:10,inherits:12,"process-nextick-args":23,"util-deprecate":37}],32:[function(e,t,r){arguments[4][7][0].apply(r,arguments)},{dup:7}],33:[function(e,t,r){(function(n){var i=function(){try{return e("stream")}catch(t){}}();r=t.exports=e("./lib/_stream_readable.js"),r.Stream=i||r,r.Readable=r,r.Writable=e("./lib/_stream_writable.js"),r.Duplex=e("./lib/_stream_duplex.js"),r.Transform=e("./lib/_stream_transform.js"),r.PassThrough=e("./lib/_stream_passthrough.js"),!n.browser&&"disable"===n.env.READABLE_STREAM&&i&&(t.exports=i)}).call(this,e("_process"))},{"./lib/_stream_duplex.js":27,"./lib/_stream_passthrough.js":28,"./lib/_stream_readable.js":29,"./lib/_stream_transform.js":30,"./lib/_stream_writable.js":31,_process:24}],34:[function(e,t,r){function n(e){if(e&&!u(e))throw new Error("Unknown encoding: "+e)}function i(e){return e.toString(this.encoding)}function o(e){this.charReceived=e.length%2,this.charLength=this.charReceived?2:0}function s(e){this.charReceived=e.length%3,this.charLength=this.charReceived?3:0}var a=e("buffer").Buffer,u=a.isEncoding||function(e){switch(e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}},f=r.StringDecoder=function(e){switch(this.encoding=(e||"utf8").toLowerCase().replace(/[-_]/,""),n(e),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=o;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=s;break;default:return void(this.write=i)}this.charBuffer=new a(6),this.charReceived=0,this.charLength=0};f.prototype.write=function(e){for(var t="";this.charLength;){var r=e.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:e.length;if(e.copy(this.charBuffer,this.charReceived,0,r),this.charReceived+=r,this.charReceived<this.charLength)return"";e=e.slice(r,e.length),t=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var n=t.charCodeAt(t.length-1);if(!(n>=55296&&56319>=n)){if(this.charReceived=this.charLength=0,0===e.length)return t;break}this.charLength+=this.surrogateSize,t=""}this.detectIncompleteChar(e);var i=e.length;this.charLength&&(e.copy(this.charBuffer,0,e.length-this.charReceived,i),i-=this.charReceived),t+=e.toString(this.encoding,0,i);var i=t.length-1,n=t.charCodeAt(i);if(n>=55296&&56319>=n){var o=this.surrogateSize;return this.charLength+=o,this.charReceived+=o,this.charBuffer.copy(this.charBuffer,o,0,o),e.copy(this.charBuffer,0,0,o),t.substring(0,i)}return t},f.prototype.detectIncompleteChar=function(e){for(var t=e.length>=3?3:e.length;t>0;t--){var r=e[e.length-t];if(1==t&&r>>5==6){this.charLength=2;break}if(2>=t&&r>>4==14){this.charLength=3;break}if(3>=t&&r>>3==30){this.charLength=4;break}}this.charReceived=t},f.prototype.end=function(e){var t="";if(e&&e.length&&(t=this.write(e)),this.charReceived){var r=this.charReceived,n=this.charBuffer,i=this.encoding;t+=n.slice(0,r).toString(i)}return t}},{buffer:6}],35:[function(e,t,r){var n=e("buffer").Buffer;t.exports=function(e){if(e instanceof Uint8Array){if(0===e.byteOffset&&e.byteLength===e.buffer.byteLength)return e.buffer;if("function"==typeof e.buffer.slice)return e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)}if(n.isBuffer(e)){for(var t=new Uint8Array(e.length),r=e.length,i=0;r>i;i++)t[i]=e[i];return t.buffer}throw new Error("Argument must be a Buffer")}},{buffer:6}],36:[function(e,t,r){(function(e){var t=4294967295;r.encodingLength=function(){return 8},r.encode=function(r,n,i){n||(n=new e(8)),i||(i=0);var o=Math.floor(r/t),s=r-o*t;return n.writeUInt32BE(o,i),n.writeUInt32BE(s,i+4),n},r.decode=function(r,n){n||(n=0),r||(r=new e(4)),n||(n=0);var i=r.readUInt32BE(n),o=r.readUInt32BE(n+4);return i*t+o},r.encode.bytes=8,r.decode.bytes=8}).call(this,e("buffer").Buffer)},{buffer:6}],37:[function(e,t,r){(function(e){function r(e,t){function r(){if(!i){if(n("throwDeprecation"))throw new Error(t);n("traceDeprecation")?console.trace(t):console.warn(t),i=!0}return e.apply(this,arguments)}if(n("noDeprecation"))return e;var i=!1;return r}function n(t){try{if(!e.localStorage)return!1}catch(r){return!1}var n=e.localStorage[t];return null==n?!1:"true"===String(n).toLowerCase()}t.exports=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],38:[function(e,t,r){function n(e,t){function r(){for(var t=new Array(arguments.length),r=0;r<t.length;r++)t[r]=arguments[r];var n=e.apply(this,t),i=t[t.length-1];return"function"==typeof n&&n!==i&&Object.keys(i).forEach(function(e){n[e]=i[e]}),n}if(e&&t)return n(e)(t);if("function"!=typeof e)throw new TypeError("need wrapper function");return Object.keys(e).forEach(function(t){r[t]=e[t]}),r}t.exports=n},{}],39:[function(e,t,r){function n(e,t,r){var o=this;return this instanceof n?(r=r||{},o._elem=t,o._elemWrapper=new i(t),o._waitingFired=!1,o._trackMeta=null,o._file=e,o._tracks=null,"none"!==o._elem.preload&&o._createMuxer(),o._onError=function(e){o.destroy()},o._onWaiting=function(){o._waitingFired=!0,o._muxer?o._tracks&&o._pump():o._createMuxer()},o._elem.addEventListener("waiting",o._onWaiting),void o._elem.addEventListener("error",o._onError)):new n(e,t,r)}var i=e("mediasource"),o=e("pump"),s=e("./mp4-remuxer");t.exports=n,n.prototype._createMuxer=function(){var e=this;e._muxer=new s(e._file),e._muxer.on("ready",function(t){e._tracks=t.map(function(t){var r=e._elemWrapper.createWriteStream(t.mime);return r.on("error",function(t){e._elemWrapper.error(t)}),r.write(t.init),{muxed:null,mediaSource:r}}),(e._waitingFired||"auto"===e._elem.preload)&&e._pump()}),e._muxer.on("error",function(t){e._elemWrapper.error(t)})},n.prototype._pump=function(){var e=this,t=e._muxer.seek(e._elem.currentTime,!e._tracks);e._tracks.forEach(function(r,n){r.muxed&&(r.muxed.destroy(),r.mediaSource=e._elemWrapper.createWriteStream(r.mediaSource),r.mediaSource.on("error",function(t){e._elemWrapper.error(t)})),r.muxed=t[n],o(r.muxed,r.mediaSource)})},n.prototype.destroy=function(){var e=this;e.destroyed||(e.destroyed=!0,e._elem.removeEventListener("waiting",e._onWaiting),e._elem.removeEventListener("error",e._onError),e._tracks&&e._tracks.forEach(function(e){e.muxed.destroy()}),e._elem.src="")}},{"./mp4-remuxer":1,mediasource:14,pump:25}]},{},[39]);